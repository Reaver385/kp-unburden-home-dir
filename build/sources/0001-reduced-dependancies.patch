--- a/bin/unburden-home-dir	2016-05-25 09:57:15.000000000 +1000
+++ b/bin/unburden-home-dir	2016-11-25 19:12:55.260722652 +1100
@@ -30,13 +30,11 @@
 our $VERSION = '0.4.0.1';
 
 # Load Modules
-use Config::File;
 use Getopt::Std; $Getopt::Std::STANDARD_HELP_VERSION = 1;
 use File::Path qw(mkpath rmtree);
 use File::Basename;
 use File::BaseDir qw(config_home);
 use File::Touch;
-use File::Rsync;
 use File::Which;
 use IO::Handle;
 use String::Expand;
@@ -140,6 +138,57 @@
     return;
 }
 
+#
+# BEGIN: Non-packaged lighter-weight implementations of read_config_file and rsync
+#
+
+# Read configuration file
+sub read_config_file($) {
+  my $file = shift;
+  my $config = {};
+  my $line_num = 0;
+
+  open(FH, $file) or croak("Can't read configuration in $file: $!\n");
+
+  while (++$line_num and my $line = <FH>) {
+    # remove new lines
+    chomp($line);
+
+    # skip comments and blank lines
+    next if $line =~ m/^(\s+|\s*#.*)$/;
+
+    unless ($line =~ m/\s*([A-Za-z0-9_\-]+)\s*=\s*(['"]?)(.*?)\2\s*$/) {
+      warn "Invalid format at line $line_num, skipping.";
+      next;
+    }
+
+    # assign the key/value
+    $config->{$1} = $3;
+  }
+
+  close(FH);
+
+  return $config;
+}
+
+# Perform an verbose archive via rsync
+sub rsync($$) {
+  my ($from, $to) = @_;
+
+  open(PS, "rsync -va \"$from\" \"$to\" 2>&1 |") || return 1;
+
+  while (<PS>) {
+    chomp;
+    say unless m(^sent |^total size|^\s*$)
+  }
+
+  return $? >> 8;
+}
+
+# END
+#
+
+
 # Parse command line options
 getopts('hnuf:Fb:c:C:l:L:', \%OPTIONS);
 
@@ -182,7 +231,7 @@
 foreach my $configfile (@CONFFILES) {
     if ( -e $configfile ) {
         # Workaround RT#98542 in Config::File 1.50 and earlier
-        my $cf = Config::File::read_config_file($configfile);
+        my $cf = read_config_file($configfile);
         if (defined($cf)) {
             $CONFIG = { %$CONFIG, %$cf };
         }
@@ -206,22 +255,6 @@
 my $OLDUMASK = umask();
 umask(077);
 
-# Initialize rsync object
-my $rsync = File::Rsync->new(
-    archive => 1,
-    verbose => 1,
-    outfun => sub {
-        my $output = shift;
-        chomp($output);
-        say $output unless $output =~ m(^sent |^total size|^\s*$);
-    },
-    errfun => sub {
-        # uncoverable subroutine
-        chomp;          # uncoverable statement
-        warn "$_[0]\n"; # uncoverable statement
-    },
-);
-
 # Check for lsof in search path
 my $which_lsof = which('lsof');
 # Extra check for crappy distributions which place lsof outside a
@@ -257,10 +290,7 @@
             $from .= '/';
             $to .= '/';
 
-            my $rc = $rsync->exec(
-                src => $from,
-                dst => $to,
-            );
+            my $rc = $rsync($from, $to);
             rmtree($from);
         } else {
             my $rc = system(qw(mv -v), $from, $to);
